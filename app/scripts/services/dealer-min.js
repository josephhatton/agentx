Modustri.factory("DealerServices",["$log","$http","AuthServices","AppSettings","$q",function(e,r,t,a,s){"use strict";function n(e,r,t,a){var s=a.url,n=s.indexOf("?");if(-1!==n&&(s=s.substring(0,n)),403===r)$location.path("/404");else{var o=404===r?"No service found at "+s+".":500===r?"Error in service at "+s+".":e;console.log(o)}}var o={};return o.getDealerList=function(e){r.get(a.BASE_URL+"dealers/"+t.getUserHash()+"/"+t.getUserID()+"/",{cache:!0}).success(e).error(n)},o.getDealerImg=function(e){return r.get(a.BASE_URL+"dealer/"+t.getUserHash()+"/"+t.getUserID()+"/"+e+"/").then(function(e){return e})},o.save=function(s){return r.post(a.BASE_URL+"dealer/"+t.getUserHash()+"/"+t.getUserID()+"/"+s.id+"/",s).success(function(e,r,t){return e}).error(function(r,t,a){e.error(r),e.error(t),e.error(a)})},o.saveDealerImg=function(e){var r=e.dealer_id,n=s.defer(),i=new FormData,d=e.dealer_obj;delete d.archived,i.append("dealer_obj",e.dealer_obj),i.append("file",e.file),i.append("dealer_id",e.dealer_obj.id),i.append("description","Dealer Image"),i.append("user_id",e.user_id);var u=new XMLHttpRequest;return u.onreadystatechange=function(){if(4===u.readyState&&200===u.status){var e=JSON.parse(u.response);d.image_id=e.results.id,o.save(d).then(function(e){}),n.resolve(!0)}else 4===u.readyState&&200!==u.status&&(n.resolve(!1),console.warn("problem uploading dealer image"))},u.open("post",a.BASE_URL+"image/"+t.getUserHash()+"/"+t.getUserID()+"/"),u.send(i),n.promise},o}]);
//# sourceMappingURL=./dealer-min.js.map