Modustri.controller("InspectionCtrl",["$log","$scope","$q","$routeParams","$location","$http","InsServices","CustomerServices","MachineServices","UserServices","Utilities","AuthServices","DealerServices","TemplateServices","AppSettings",function(e,n,t,i,s,a,r,o,c,l,d,p,u,m,g){"use strict";p.checkUserCreds(),n.UserSettings=p.getUserSettings();var h="uiinspections",f=p.getDealerID();n.uiShow=function(e){return p.uiToggle(p.getUserLevel(),h,e)},n.savebtn_locked=!1,n.state=null,n.is_latest_ins=!1,n.photouploaded=[],n.Components={},n.Measureable_parts=[],n.Tools=[],n.Summaries=[],n.Prev_ins={};var b=new Date;n.today_unix=moment.utc().format("X"),n.today_ds=d.getDatestring(n.today_unix),n.state="inspectionID"in i?"edit":"add";var I=function(){return"inspectionTypeUCI"in n.Ins.inspection_obj==!1?!0:n.Ins.inspection_obj.inspectionTypeUCI};n.condition_class=function(e,n){var t=e;return"left"===n&&(t+=" left-percentage"),"right"===n&&(t+=" right-percentage"),t};var v=function(){l.query().then(function(e){var t=e.results;n.Ins.inspection_obj.inspector="",void 0!=n.Ins.inspection_obj.user&&void 0!=n.Ins.inspection_obj.user.username&&(n.Ins.inspection_obj.inspector=n.Ins.inspection_obj.user.username),n.UserList=t,n.$emit("inspector_list_loaded")})},j=function(){n.$watch("Ins.inspection_obj.hour_meter_reading",function(e,t){e!==t&&(n.Ins.inspection_obj.machine.hour_meter_reading=e)}),n.$watch("Ins.inspection_obj.user.id",function(e,t){var i;e!==t&&(i=_.find(n.UserList,function(n){return n.id===e}),n.Ins.inspection_obj.user.username=i.username,n.Ins.inspection_obj.user.userlevel=i.userlevel,n.Ins.inspection_obj.user.archived=i.archived,n.Ins.inspection_obj.user.customer_id=i.customer_id,n.Ins.inspection_obj.user.dealer_id=i.dealer_id,n.Ins.inspection_obj.user.email=i.email)}),n.$watch("Ins.inspection_obj.machine.serial",function(e,t){if(""!=e){k();var i;c.getBySerial(n.Ins.inspection_obj.machine.serial).then(function(e){n.Ins.inspection_obj.hour_meter_reading=e.data.results[0].hour_meter_reading,""!==e.data.results[0].main_image_id&&"false"!=e.data.results[0].main_image_id&&"(null)"!=e.data.results[0].main_image_id?(n.Ins.inspection_obj.machine.main_image_id=e.data.results[0].main_image_id,n.Ins.inspection_obj.machine.img=g.BASE_URL+"imgtmb/"+e.data.results[0].main_image_id+"/",n.Ins.inspection_obj.machine.img_full=g.BASE_URL+"img/"+e.data.results[0].main_image_id+"/"):(n.Ins.inspection_obj.machine.main_image_id="",n.Ins.inspection_obj.machine.img="",n.Ins.inspection_obj.machine.img_full=""),e.data.results[0].manufacturer_id&&(n.Ins.inspection_obj.machine.manufacturer_id=e.data.results[0].manufacturer_id,c.getManufacturerById(n.Ins.inspection_obj.machine.manufacturer_id).then(function(e){n.Ins.inspection_obj.machine.manufacturer_name=e.data.results.company})),n.Ins.inspection_obj.machine.under_carriage_brand=e.data.results[0].under_carriage_brand})}})},k=function(){var e,t,i,s="";k.cache=k.cache||{init:!1},d.showLoading(),k.act_queue={started:!0,length:1},c.getComponentsByMachineModel(n.Ins.inspection_obj.machine.model_id,function(t){n.Components=[],e=t.results,e.length>0?(k.act_queue.started=!0,k.act_queue.length=e.length):d.hideLoading();for(var i=0;i<e.length;i++)e[i].hasOwnProperty("component_id")&&c.createComponentObj(n,e[i].component_id).then(function(e){e!==!1&&(s=d.snakeCase(e.type),"idlers"!==s&&(n.Components[s]||(n.Components[s]=[]),n.Components[s]||(n.Components[s]=[]),n.Components[s].push(e),"undefined"!=typeof n.Components[s]&&"add"==n.state&&k.cache.init!==!0&&"undefined"!=typeof n.Ins.inspection_obj.results[s]&&(n.Ins.inspection_obj.results[s].model_id=n.Components[s][0].component_id)),"idlers"===s&&(n.Components.idlers_front||(s="idlers_front",n.Components[s]=[]),n.Components.idlers_front.push(e),"undefined"!=typeof n.Components[s]&&"add"==n.state&&k.cache.init!==!0&&"undefined"!=typeof n.Ins.inspection_obj.results[s]&&(n.Ins.inspection_obj.results[s].model_id=n.Components[s][0].component_id),n.Components.idlers_rear||(s="idlers_rear",n.Components[s]=[]),n.Components[s]||(n.Components[s]=[]),n.Components[s].push(e),"undefined"!=typeof n.Components[s]&&"add"==n.state&&k.cache.init!==!0&&"undefined"!=typeof n.Ins.inspection_obj.results[s]&&(n.Ins.inspection_obj.results[s].model_id=n.Components[s][0].component_id))),k.act_queue.length--,0==k.act_queue.length&&(k.act_queue.started=!1,d.hideLoading())})})},y=function(){c.getPartManufacturers().then(function(e){n.UndercarriageBrands=e.data.results})};n.removePart=function(e,t){n.Ins.inspection_obj.results[e].splice(t,1)},n.updateAllComponentData=function(e){var t=n.Ins.inspection_obj.results,i={bushing_allowable_wear:t.bushing_allowable_wear,link_allowable_wear:t.link_allowable_wear};switch(i.impact=t.underfoot_conditions.impact,i.abrasive=t.underfoot_conditions.abrasive,i.packing=t.underfoot_conditions.packing,i.moisture=t.underfoot_conditions.moisture,t.underfoot_conditions=t.underfoot_conditions||{},e){case"Track Link":_.forEach(t.track_links,function(e,s){e.left.id=e.right.id=t.track_links.model_id,r.setPercentages("track_links",s,i,n,n.UserSettings.show_metric)});break;case"Track Rollers":_.forEach(t.track_rollers,function(e,s){e.left.id=e.right.id=t.track_rollers.model_id,r.setPercentages("track_rollers",s,i,n,n.UserSettings.show_metric)});break;case"Bushing":_.forEach(t.bushings,function(e,s){e.left.id=e.right.id=t.bushings.model_id,r.setPercentages("bushings",s,i,n,n.UserSettings.show_metric)});break;case"Carrier Roller":_.forEach(t.carrier_rollers,function(e,s){e.left.id=e.right.id=t.carrier_rollers.model_id,r.setPercentages("carrier_rollers",s,i,n,n.UserSettings.show_metric)});break;case"Idler":_.forEach(t.idlers,function(e,i){e.left.id=e.right.id=t.idlers.model_id,r.setPercentages("idlers",e,i,n,n.UserSettings.show_metric)});break;case"Idler Front":_.forEach(t.idlers_front,function(e,s){e.left.id=e.right.id=t.idlers_front.model_id,r.setPercentages("idlers_front",s,i,n,n.UserSettings.show_metric)});break;case"Idler Rear":_.forEach(t.idlers_rear,function(e,s){e.left.id=e.right.id=t.idlers_rear.model_id,r.setPercentages("idlers_rear",s,i,n,n.UserSettings.show_metric)});break;case"Pins and Bushings":_.forEach(t.pins_and_bushings,function(e,s){e.left.id=e.right.id=t.pins_and_bushings.model_id,r.setPercentages("pins_and_bushings",s,i,n,n.UserSettings.show_metric)});break;case"Sprocket":_.forEach(t.sprockets,function(e,s){e.left.id=e.right.id=t.sprockets.model_id,r.setPercentages("sprockets",s,i,n,n.UserSettings.show_metric)});break;case"Track Shoe":_.forEach(t.track_shoes,function(e,s){e.left.id=e.right.id=t.track_shoes.model_id,r.setPercentages("track_shoes",s,i,n,n.UserSettings.show_metric)})}},n.updateWearPercentages=function(e,t,i){var s=n.Ins.inspection_obj.results,a={bushing_allowable_wear:s.bushing_allowable_wear,link_allowable_wear:s.link_allowable_wear};switch(a.impact=s.underfoot_conditions.impact,a.abrasive=s.underfoot_conditions.abrasive,a.packing=s.underfoot_conditions.packing,a.moisture=s.underfoot_conditions.moisture,s.underfoot_conditions=s.underfoot_conditions||{},e){case"Track Link":r.setPercentages("track_links",t,a,n,i);break;case"Track Rollers":r.setPercentages("track_rollers",t,a,n,i);break;case"Bushing":r.setPercentages("bushings",t,a,n,i);break;case"Bushings":r.setPercentages("bushings",t,a,n,i);break;case"Carrier Roller":r.setPercentages("carrier_rollers",t,a,n,i);break;case"Idler":r.setPercentages("idlers",t,a,n,i);break;case"Idler Front":r.setPercentages("idlers_front",t,a,n,i);break;case"Idler Rear":r.setPercentages("idlers_rear",t,a,n,i);break;case"Pins and Bushings":r.setPercentages("pins_and_bushings",t,a,n,i);break;case"Sprocket":r.setPercentages("sprockets",t,a,n,i);break;case"Track Shoe":r.setPercentages("track_shoes",t,a,n,i)}},n.toggleCompleted=function(){n.Ins.completed=1===n.Ins.completed?0:1},n.addPart=function(e){var t={left:{measured:"",id:"",percent:"",tool:"",tool_type:"",notes:""},right:{measured:"",id:"",percent:"",tool:"",notes:""}};"results"in n.Ins.inspection_obj==!1&&(n.Ins.inspection_obj.results={}),"undefined"==typeof n.Ins.inspection_obj.results[e]&&(n.Ins.inspection_obj.results[e]=[],n.Ins.inspection_obj.results[e].model_id=""),t.left.id=t.right.id=n.Ins.inspection_obj.results[e].model_id,n.Ins.inspection_obj.results[e].unshift(t)},n.general_images=[],"edit"===n.state?(r.get(i.inspectionID).then(function(e){n.Ins=e.data.results,c.get(n.Ins.inspection_obj.machine.id,!1).then(function(e){var t=e.data.results;""!==t.main_image_id&&t.main_image_id>0&&(n.Ins.inspection_obj.machine.main_image_id=t.main_image_id,n.Ins.inspection_obj.machine.img=g.BASE_URL+"imgtmb/"+t.main_image_id+"/",n.Ins.inspection_obj.machine.img_full=g.BASE_URL+"img/"+t.main_image_id+"/"),t.manufacturer_id&&(n.Ins.inspection_obj.machine.manufacturer_id=t.manufacturer_id,c.getManufacturerById(n.Ins.inspection_obj.machine.manufacturer_id).then(function(e){n.Ins.inspection_obj.machine.manufacturer_name=e.data.results.company})),t.model&&(n.Ins.inspection_obj.machine.model=t.model)}),void 0!==n.Ins.inspection_obj.general&&_.each(n.Ins.inspection_obj.general.template_inspection_types,function(e,t,i){n.templatetype_showhide[t]=1,_.each(e.inspection_type_tasks,function(e,n,t){e.task_instructions_object=angular.fromJson(e.task_instructions),_.each(e.task_instructions_object.steps,function(e,n,t){if(e.photos&&(e.photos.url=[],e.photos.newimage=[],_.each(e.photos.value,function(n,t,i){e.photos.url.push(""==n?"":g.BASE_URL+"imgtmb/"+n),e.photos.newimage.push(!1)})),e.rating){e.rating.rating_increment||(e.rating.rating_min=1,e.rating.rating_max=10,e.rating.rating_increment=1),e.rating.values=[];for(var i=e.rating.rating_min;i<=e.rating.rating_max;i+=e.rating.rating_increment)e.rating.values.push(i);e.rating.width=20*((e.rating.value-e.rating.rating_min)/e.rating.rating_increment+1),e.rating.width_gray=(e.rating.rating_max-e.rating.value)/e.rating.rating_increment*20}e.boolean&&(e.boolean.boolean_type&&0!=e.boolean.boolean_type?1==e.boolean.boolean_type?e.boolean.values={0:"No",1:"Yes"}:2==e.boolean.boolean_type&&(e.boolean.values={0:"Off",1:"On"}):e.boolean.values={0:"Incomplete",1:"Complete"})})})}),n.Measureable_parts=[];var t={};n.Prev_ins=!1,"results"in n.Ins.inspection_obj==!1&&(n.Ins.inspection_obj.results={}),c.queryPhotos(n.Ins.inspection_obj.machine.id).then(function(e){angular.forEach(e.data.results,function(e,t){"General Image"==e.description&&e.inspection_id==i.inspectionID&&n.general_images.push({url:g.BASE_URL+"imgtmb/"+e.id,name:e.description})})}),"false"==n.Ins.inspection_obj.machine.main_image_id&&(n.Ins.inspection_obj.machine.main_image_id="",n.Ins.inspection_obj.machine.img="",n.Ins.inspection_obj.machine.img_full=""),c.get(n.Ins.machine_id).then(function(e){n.Ins.inspection_obj.machine.equipment_id=e.data.results.equipment_id,n.Ins.inspection_obj.machine.id<1&&(n.Ins.inspection_obj.machine.id=n.Ins.machine_id),n.Ins.inspection_obj.machine.serial=e.data.results.serial,0==n.Ins.inspection_obj.machine.main_image_id&&e.data.results.main_image_id>0&&(n.Ins.inspection_obj.machine.main_image_id=e.data.results.main_image_id,n.Ins.inspection_obj.machine.img=g.BASE_URL+"imgtmb/"+n.Ins.inspection_obj.machine.main_image_id+"/",n.Ins.inspection_obj.machine.img_full=g.BASE_URL+"/img/"+n.Ins.inspection_obj.machine.main_image_id+"/")}),o.get(n.Ins.customer_id).then(function(e){var t=e.data.results;n.Ins.inspection_obj.customer=n.Ins.inspection_obj.customer||{},n.Ins.inspection_obj.customer.name=t.name,n.Ins.customer_name=t.name,n.Ins.inspection_obj.customer.id=t.id,n.Ins.inspection_obj.customer.address=t.address,n.Ins.inspection_obj.customer.city=t.city,n.Ins.inspection_obj.customer.state=t.state,n.Ins.inspection_obj.customer.zip=t.zip,n.Ins.inspection_obj.customer.primary_contact_id=t.primary_contact_id,n.$emit("inspection_loaded",n.Ins)}),r.getByMachineId(n.Ins.machine_id).then(function(e){if(n.prev_ins_arr=e.data.results,n.prev_ins_arr.length>0)if(n.prev_ins_arr.sort(function(e,n){return parseInt(e.timestamp,10)<parseInt(n.timestamp,10)?1:parseInt(e.timestamp,10)>parseInt(n.timestamp,10)?-1:parseInt(e.timestamp,10)===parseInt(n.timestamp,10)?0:void 0}),n.Ins.timestamp==n.prev_ins_arr[0].timestamp)n.is_latest_ins=!0,n.Prev_ins=n.prev_ins_arr[1];else for(var t=1;t<=n.prev_ins_arr.length;t++)if(void 0!==n.prev_ins_arr[t]&&parseInt(n.prev_ins_arr[t].timestamp,10)<parseInt(n.Ins.timestamp,10)){n.Prev_ins=n.prev_ins_arr[t];break}n.Prev_ins&&r.getFailureDates(n),r.buildSummariesTable(n)}),r.cleanUpNulls(n),n.Ins.datestring=d.getDatestring(n.Ins.timestamp),n.Ins.dealer_id=p.getDealerID(),r.setMainPhoto(n),_.each(n.Ins.inspection_obj.results,function(e,n,t){if(!e.hasOwnProperty("model_id")||!e.model_id)for(var i in e)if("undefined"!=typeof e[i]&&e[i].hasOwnProperty("left")){e.model_id=e[i].left.id||e[i].right.id;var s=e[i].left.measured,a=!1,o=e[i].right.measured,l=!1;e[i].left.hasOwnProperty("measured_metric")||(0!==s&&s!==!1&&(a=s/.03937),e[i].left.measured_metric=isNaN(a)?"":Math.round(a,2)),e[i].right.hasOwnProperty("measured_metric")||(0!==o&&(l=o/.03937),e[i].right.measured_metric=isNaN(l)?"":Math.round(l,2))}_.each(e,function(e,i,s){r.setCondition(t,n,i),e.hasOwnProperty("left")&&e.left.hasOwnProperty("id")&&null!=e.left.id&&c.getComponentData(e.left.id).then(function(n){e.left.compdata=n.data.results}),e.hasOwnProperty("right")&&e.right.hasOwnProperty("id")&&null!=e.right.id&&c.getComponentData(e.right.id).then(function(n){e.right.compdata=n.data.results}),e.hasOwnProperty("left")&&e.left.hasOwnProperty("install_date")&&(e.left.install_datestring=d.getDatestring(e.left.install_date)),e.hasOwnProperty("right")&&e.right.hasOwnProperty("install_date")&&(e.right.install_datestring=d.getDatestring(e.right.install_date))})}),c.getInspectionPhotos(n.Ins.id).then(function(e){r.renderInspectionPhotos(n,e)}),k(),v(),y(),r.getToolTypes().then(function(e){n.Tools=e.data.results}),u.getDealerImg(f).then(function(e){n.Ins.dealer_img_url="image_id"in e.data.results&&null!==e.data.results.image_id?g.BASE_URL+"img/"+e.data.results.image_id+"/":!1}),t=n.Ins.inspection_obj.results,c.getComponentTypesMachineNames().then(function(e){n.Measureable_parts=e,angular.forEach(t,function(e,i){_.contains(n.Measureable_parts,i)&&angular.forEach(t[i],function(e,s){r.setMeasurementToolNames(n,t[i][s]),r.setComponentDescription(t[i][s])})}),j()})}),n.saveInspection=function(){n.savebtn_locked=!0;var e=angular.copy(n.Ins),t=e.id;return""===n.Ins.datestring?void alert("Inspection Date should not be empty"):(""===n.Ins.inspection_obj.maintenance_datestring&&(n.Ins.inspection_obj.maintenance_datestring=d.getDatestring(n.today_unix)),e.timestamp=d.getTimestamp(e.datestring),e.inspection_obj.maintenance_date=d.getTimestamp(n.Ins.inspection_obj.maintenance_datestring),n.Ins.inspection_obj.maintenance_date=d.getTimestamp(n.Ins.inspection_obj.maintenance_datestring),delete e.machine,delete e.customer,delete e.id,delete e.archived,delete e.modified,delete e.note,delete e.dealer_img_url,delete e.inspector,delete e.datestring,delete e.inspection_obj.maintenance_datestring,angular.forEach(e.results,function(n){angular.forEach(n,function(t){"description"in e.results[n][t]&&delete e.results[n][t].description,"tool_name"in e.results[n][t].left&&delete e.results[n][t].left.tool_name,"tool_name"in e.results[n][t].right&&delete e.results[n][t].right.tool_name})}),void(n.photouploaded&&n.photouploaded.length>0?(console.log("uploading general photos..."),_.each(n.photouploaded,function(i,s,a){var o={file:i.photo,description:"Inspection's General Photo",user_id:p.getUserID()};r.saveGeneralPhotos(o).then(function(a){if(0==a)console.log("inspection general photo has been failed");else{console.log("inspection general photo has been saved");var r=i.index.split("_"),o=n.Ins.inspection_obj.general.template_inspection_types[r[0]].inspection_type_tasks[r[1]].task_instructions_object.steps[r[2]].photos;o.value[r[3]]=a.id,o.url[r[3]]=g.BASE_URL+"imgtmb/"+a.id}i.processed=!0,s+1==n.photouploaded.length&&n.saveInspectionReally(e,t)})})):n.saveInspectionReally(e,t)))},n.saveInspectionReally=function(e,t){void 0!==n.Ins.inspection_obj.general&&_.each(n.Ins.inspection_obj.general.template_inspection_types,function(e,n,t){_.each(e.inspection_type_tasks,function(e,n,t){for(var i=0;i<e.task_instructions_object.steps.length;i++){var s=e.task_instructions_object.steps[i];s.boolean&&(s.boolean.value=s.boolean.value?1:0)}e.task_instructions=angular.toJson(e.task_instructions_object)})}),_.each(n.Ins.inspection_obj.results,function(e,n,t){_.each(e,function(e,n,t){e.hasOwnProperty("left")&&e.left.hasOwnProperty("install_datestring")&&(e.left.install_date=d.getTimestamp(e.left.install_datestring),delete e.left.install_datestring),e.hasOwnProperty("right")&&e.right.hasOwnProperty("install_datestring")&&(e.right.install_date=d.getTimestamp(e.right.install_datestring),delete e.left.install_datestring)})}),e.inspection_obj=JSON.stringify(n.Ins.inspection_obj),r.save(e,t).then(function(i){alert("Inspection saved."),n.is_latest_ins&&(e=n.Ins.inspection_obj.machine,delete e.img_full,delete e.img,delete e.archived,c.save(e).then(function(e){console.log("Machine updated.")})),n.$emit("inspection_saved",i),s.path("/inspections/"+t)})},n.addPhoto=function(e){e.newimage.push(!1),e.url.push(""),e.value.push("")},n.deletePhoto=function(e,t,i,s,a){if(confirm("Really Delete?")){var r=_.find(n.photouploaded,function(e){return e.index==t+"_"+i+"_"+s+"_"+a});void 0!=r&&n.photouploaded.splice(r.order,1);for(var o=0;o<n.photouploaded.length;o++)n.photouploaded[o].order=o;$("#photo-upload-"+t+"-"+i+"-"+s+"-"+a+" .upload-image-wrapper img").remove(),e.newimage.splice(a,1),e.url.splice(a,1),e.value.splice(a,1)}},n.$watch("photouploaded",function(e,n){}),n.deleteInspection=function(){confirm("Are you sure you want to delete this inspection?")&&r.del(n.Ins.id).then(function(e){n.$emit("inspection_deleted",e),s.path("/inspections/list/")})}):(n.Ins=r.getEmptyInspection(),n.Ins.dealer_id=p.getDealerID(),n.Ins.datestring=n.today_ds,n.Ins.inspection_obj.maintenance_datestring=n.today_ds,n.Ins.inspection_obj.user.id=p.getUserID(),n.Ins.user_id=p.getUserID(),n.machine_img="images/tmp.png",n.Ins.inspection_obj.machine.manufacturer_name="",k(),v(),y(),r.getToolTypes().then(function(e){n.Tools=e.data.results}),"undefined"!=typeof i.machineID&&(n.Ins.inspection_obj.machine.serial=i.machineID,c.getBySerial(n.Ins.inspection_obj.machine.serial).then(function(e){n.Ins.inspection_obj.hour_meter_reading=e.data.results[0].hour_meter_reading})),u.getDealerImg(f).then(function(e){n.Ins.dealer_img_url="image_id"in e.data.results&&null!==e.data.results.image_id?g.BASE_URL+"img/"+e.data.results.image_id+"/":!1}),j(),n.saveInspection=function(){if(""===n.Ins.machine_id)return void alert("Please pick a machine to associate with this inspection.");if(""===n.Ins.datestring)return void alert("Inspection Date should not be empty");n.savebtn_locked=!0;var e=angular.copy(n.Ins);e.timestamp=d.getTimestamp(e.datestring),e.inspection_obj.maintenance_date="undefined"==typeof e.inspection_obj.maintenance_datestring||""===e.inspection_obj.maintenance_datestring?e.timestamp:d.getTimestamp(e.inspection_obj.maintenance_datestring),delete e.machine,delete e.customer,delete e.id,delete e.archived,delete e.inspector,delete e.dealer_img_url,delete e.datestring,delete e.inspection_obj.maintenance_datestring,""==e.customer_id&&(e.customer_id=0),e.inspection_obj.customer.id=e.customer_id,_.each(n.Ins.inspection_obj.results,function(e,n,t){_.each(e,function(e,n,t){e.hasOwnProperty("left")&&e.left.hasOwnProperty("install_datestring")&&(e.left.install_date=d.getTimestamp(e.left.install_datestring),delete e.left.install_datestring),e.hasOwnProperty("right")&&e.right.hasOwnProperty("install_datestring")&&(e.right.install_date=d.getTimestamp(e.right.install_datestring),delete e.left.install_datestring)})}),e.inspection_obj=JSON.stringify(e.inspection_obj),r.saveNew(e).then(function(t){alert("Inspection saved."),n.$emit("inspection_saved",t),e=n.Ins.inspection_obj.machine,delete e.img_full,delete e.img,c.save(e).then(function(e){}),s.path("/inspections/"+t.data.results.id)})}),n.toggleGeneralImages=function(){$("#imagesSection").slideToggle("normal")},n.generalimages_showhide=1,n.comppanels_showhide=1,n.templatetype_showhide=[],n.comp_showhide={sprocket:1,bushing:1,frontidler:1,carrierroller:1,link:1,shoe:1,rearidler:1,trackroller:1},n.comppanels_left={sprocket:{id:"sprocket",dtarray:"sprockets",showhide:1,title:"Sprockets",icon:"svg/sprockets.svg"},bushing:{id:"bushing",dtarray:"bushings",showhide:1,title:"Bushings",icon:"svg/bushings.svg"},frontidler:{id:"frontidler",dtarray:"idlers_front",showhide:1,title:"Front Idlers",icon:"svg/idler.svg"},carrierroller:{id:"carrierroller",dtarray:"carrier_rollers",showhide:1,title:"Carrier Rollers",icon:"svg/carrier_rollers.svg"}},n.comppanels_right={link:{id:"link",dtarray:"track_links",showhide:1,title:"Links",icon:"svg/links.svg"},shoe:{id:"shoe",dtarray:"track_shoes",showhide:1,title:"Shoes",icon:"svg/shoes.svg"},rearidler:{id:"rearidler",dtarray:"idlers_rear",showhide:1,title:"Rear Idlers",icon:"svg/idler.svg"},trackroller:{id:"trackroller",dtarray:"track_rollers",showhide:1,title:"Track Rollers",icon:"svg/track_rollers.svg"}},n.edit_comps={0:{id:"link",icon_cls:"links-btn",dtarray:"track_links",title:"Track Link",label:"Track Links",icon:"svg/links.svg",showhide:1},1:{id:"bushing",icon_cls:"bushings-btn",dtarray:"bushings",title:"Bushing",label:"Bushings",icon:"svg/bushings.svg",showhide:1},2:{id:"shoe",icon_cls:"shoes-btn",dtarray:"track_shoes",title:"Track Shoe",label:"Track Shoes",icon:"svg/shoes.svg",showhide:1},3:{id:"frontidler",icon_cls:"idlers-btn",dtarray:"idlers_front",title:"Idler Front",label:"Front Idlers",icon:"svg/idler.svg",showhide:1},4:{id:"rearidler",icon_cls:"idlers-btn",dtarray:"idlers_rear",title:"Idler Rear",label:"Rear Idlers",icon:"svg/idler.svg",showhide:1},5:{id:"carrierroller",icon_cls:"carrier-rollers-btn",dtarray:"carrier_rollers",title:"Carrier Roller",label:"Carrier Rollers",icon:"svg/carrier_rollers.svg",showhide:1},6:{id:"trackroller",icon_cls:"track-rollers-btn",dtarray:"track_rollers",title:"Track Rollers",label:"Track Rollers",icon:"svg/track_rollers.svg",showhide:1},7:{id:"sprocket",icon_cls:"sprockets-btn",dtarray:"sprockets",title:"Sprocket",label:"Sprockets",icon:"svg/sprockets.svg",showhide:1}}}]);
//# sourceMappingURL=./inspection-min.js.map